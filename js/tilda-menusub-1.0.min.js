function t_menusub_init(u){var t=document.querySelectorAll("#rec"+u+" .t-menusub");Array.prototype.forEach.call(t,function(t){var e,n=t.getAttribute("data-submenu-hook");n&&(e=!1,t=document.querySelectorAll("#rec"+u+" a.t-menu__link-item"),Array.prototype.forEach.call(t,function(t){t.getAttribute("data-menu-submenu-hook")&&(e=!0)}),t=e?document.querySelectorAll('a[data-menu-submenu-hook="'+n+'"]'):document.querySelectorAll('a[href="'+n+'"]'),Array.prototype.forEach.call(t,function(t){t.classList.add("t-menusub__target-link"),t.setAttribute("data-tooltip-menu-id",u)}),t_menusub_add_arrow(u,t,n),t_menusub_set_up_menu(u,t,n),t_menusub_highlight(),t_menusub_checkAnchorLinks(u))});var e=window.isMobile?"orientationchange":"resize";window.addEventListener(e,function(){Array.prototype.forEach.call(t,function(t){t=t.querySelectorAll(".t-menusub__menu");Array.prototype.forEach.call(t,function(t){t_menusub_hide_submenu(t)})})})}function t_menusub_set_up_menu(n,u,t){t=document.querySelectorAll("#rec"+n+' .t-menusub[data-submenu-hook="'+t+'"] .t-menusub__menu');Array.prototype.forEach.call(t,function(e){var t=e.querySelectorAll(".t-menusub__content");(window.isMobile?t_menusub_set_up_menu_mobile:t_menusub_set_up_menu_desktop)(n,u,e),window.addEventListener("scroll",t_throttle(function(){Array.prototype.forEach.call(t,function(t){t.addEventListener("mouseleave",function(){window.isMobile||e.classList.contains("t-menusub__menu_show")&&t_menusub_hide_submenu(e)})})}))})}function t_menusub_open_inME401(t){var e,n=t.querySelector(".t280__menu__wrapper");n&&!n.classList.contains("t280__menu_static")&&(e=t.querySelector(".t280__menu"),n=t.querySelector(".t280__bottom"),t=t.querySelector(".t280__menu__wrapper"),e&&(e.style.transition="none"),n&&(n.style.transition="none"),t&&t.classList.add("t280__menu_static"))}function t_menusub_close_inME401(t){var e=t.querySelector(".t280__menu__wrapper");e&&e.classList.contains("t280__menu_static")&&((t=t.querySelector(".t280__menu__wrapper"))&&t.classList.remove("t280__menu_static"))}function t_menusub_set_up_menu_mobile(o,t,s){var e=document.querySelector("#rec"+o+" .t-menusub"),r=e?e.getAttribute("data-submenu-margin"):"";Array.prototype.forEach.call(t,function(u){u.addEventListener("click",function(t){var e,n;t.preventDefault(),980<window.innerWidth&&(n=document.querySelectorAll("#rec"+o+" .t-menusub__menu"),Array.prototype.forEach.call(n,function(t){t_menusub_hide_submenu(t)})),s.classList.contains("t-menusub__menu_show")?t_menusub_hide_submenu(s):(t_menusub_show(u,s,r),(e=u.closest(".t280"))&&(t=e.querySelector(".t280__menu__wrapper"),n=t_menusub_is_mobile_ME401(e),t=t?t.getAttribute("data-submenu-static"):"",t_menusub_is_static_ME401(e),"n"===t&&e&&n&&t_menusub_open_inME401(e)))})}),document.addEventListener("click",function(t){var e=t.target.classList.contains("t-menusub__menu")||t.target.closest(".t-menusub__menu"),n=t.target.classList.contains("t-menusub__target-link")||t.target.closest(".t-menusub__target-link");t.target.classList.contains("t794__tm-link")||t.target.classList.contains("t966__tm-link")||(!n||(t.target.classList.contains("t-menusub__target-link")?t.target:t.target.closest(".t-menusub__target-link")).getAttribute("data-tooltip-menu-id")!==o&&s.classList.contains("t-menusub__menu_show")&&t_menusub_hide_submenu(s),e||n||!s.classList.contains("t-menusub__menu_show")||t_menusub_hide_submenu(s))})}function t_menusub_set_up_menu_desktop(t,u,o){t=document.querySelectorAll("#rec"+t+" .t-menusub");Array.prototype.forEach.call(t,function(t){var e,n=t.getAttribute("data-submenu-margin");Array.prototype.forEach.call(u,function(t){t.addEventListener("mouseover",function(){t_showMenuOnHover(t,e,o,n)}),t.addEventListener("mouseout",function(){e=setTimeout(function(){t_menusub_hide_submenu(o)},300)}),t.addEventListener("click",function(t){t.preventDefault()}),t.addEventListener("auxclick",function(t){t.preventDefault()})}),o.addEventListener("mouseover",function(){t_showMenuOnHover(o,e,o,n)}),o.addEventListener("mouseout",function(){e=setTimeout(function(){t_menusub_hide_submenu(o)},300)})})}function t_showMenuOnHover(t,e,n,u){t.classList.contains("t-menusub__menu")&&!t.classList.contains("t-menusub__menu_show")||(clearTimeout(e),t.classList.contains("t-menusub__menu")&&t.classList.contains("t-menusub__menu_show")||t_menusub_show(t,n,u))}function t_menusub_show(t,e,n){var u=t.offsetHeight,o=t.offsetWidth,s=0,r="0";t&&(s=parseInt(t.style.marginLeft)||0,r=window.getComputedStyle(t).getPropertyValue("margin-top")||"0");var i=window.innerHeight,a=window.innerWidth,c=window.pageYOffset,l=n?parseInt(n,10)+10:0,_=t.offsetTop-parseInt(r,10)+u+l,m=t_menusub__getLeftRelativePos(t);e.style.display="block";n=e.offsetHeight,r=e.offsetWidth;c+i<_+n?(_=Math.max(_-n-u-2*l,c),e.classList.remove("t-menusub__menu_bottom"),e.classList.add("t-menusub__menu_top")):(e.classList.remove("t-menusub__menu_top"),e.classList.add("t-menusub__menu_bottom")),window.innerWidth<=980&&(_=0),m+r/2<a?(m=m+(o-r)/2+s)<0&&(m=10):m=a-r-10,e.style.left=m+"px",e.style.top=_+"px",e.offsetHeight,e.classList.add("t-menusub__menu_show"),t.classList.add("t-menusub__target-link_active")}function t_menusub__getLeftRelativePos(t){var e,n=0;if("fixed"===window.getComputedStyle(t).getPropertyValue("position"))e=t.getBoundingClientRect().left;else{e=t.getClientRects().length?t.getBoundingClientRect().left:0;for(var u=t.offsetParent;u&&1===u.nodeType&&"static"===window.getComputedStyle(u).getPropertyValue("position");)u=u.offsetParent;u&&u!==t&&1===u.nodeType&&(n=u.getClientRects().length?u.getBoundingClientRect().left:0)}return e-n}function t_menusub_hide_submenu(t){var e=document.querySelector(".t-menusub__target-link_active");e&&e.classList.remove("t-menusub__target-link_active"),t.style.display="",t.style.left="",t.style.top="",t.classList.remove("t-menusub__menu_show");var n=t.closest(".t280");if(!n)return!1;var u=t_menusub_is_mobile_ME401(n),e=n.querySelector(".t280__menu__wrapper"),t=e?e.getAttribute("data-submenu-static"):"",e=n.querySelectorAll(".t280__menu .t-menusub__menu_show");"n"===t&&window.isMobile&&u&&!e.length&&t_menusub_close_inME401(n)}function t_menusub_add_arrow(t,e,n){n=document.querySelector("#rec"+t+' .t-menusub[data-submenu-hook="'+n+'"]');n&&n.getAttribute("data-add-submenu-arrow")&&Array.prototype.forEach.call(e,function(t){t.insertAdjacentHTML("beforeend",'<div class="t-menusub__arrow"></div>')})}function t_menusub_highlight(){var t=window.location.href,e=window.location.pathname;Array.prototype.forEach.call([t,e],function(t){"/"===t[t.length-1]&&(t=t.slice(0,-1))}),"/"===e.charAt(0)&&(e=e.slice(1)),""===e&&(e="/");e='.t-menusub__list-item a[href="'+t+'"], .t-menusub__list-item a[href="'+t+'/"], .t-menusub__list-item a[href="'+e+'"], .t-menusub__list-item a[href="/'+e+'"], .t-menusub__list-item a[href="'+e+'/"], .t-menusub__list-item a[href="/'+e+'/"]',e=document.querySelectorAll(e);Array.prototype.forEach.call(e,function(t){t.classList.add("t-active")})}function t_menusub_is_static_ME401(t){!t||(t=t.querySelector(".t280__menu__wrapper"))&&t.classList.contains("t280__menu_static")&&t.setAttribute("data-submenu-static","n")}function t_menusub_is_mobile_ME401(t){var e=t.querySelector(".t280__menu"),n=t.querySelector(".t280__bottom"),t=t.querySelector(".t280__container"),e=e?e.offsetHeight:0,n=n?n.offsetHeight:0,t=t?t.offsetHeight:0;return window.innerHeight-n-t-40<e}function t_menusub_checkAnchorLinks(t){960<=window.innerWidth&&((t=document.querySelectorAll("#rec"+t+' a:not(.tooltipstered)[href*="#"].t-menusub__link-item')).length&&t_menusub_catchScroll(t))}function t_menusub_catchScroll(t){var e,n,u=null,o=[],s=[],r=[];Array.prototype.forEach.call(t,function(t){r.push(t)}),r.reverse(),Array.prototype.forEach.call(r,function(e){var t=t_menusub_getSectionByHref(e);t&&t.length&&Array.prototype.forEach.call(t,function(t){t.id&&o.push(t),s[t.id]=e}),e.addEventListener("click",function(){var t;e.classList.contains("tooltipstered")||(e.classList.remove("t-active"),(t=t_menusub_getSectionByHref(e))&&t.length&&Array.prototype.forEach.call(t,function(t){s[t.id].classList.add("t-active"),u=t.id}))})}),t_menusub_highlightNavLinks(r,o,s,u),window.addEventListener("resize",t_throttle(function(){t_menusub_updateSectionsOffsets(o)})),setTimeout(function(){t_menusub_updateSectionsOffsets(o),t_menusub_highlightNavLinks(r,o,s,u)},1e3),window.addEventListener("scroll",t_throttle(function(){var t=(new Date).getTime();e&&t<e+100?(clearTimeout(n),n=setTimeout(function(){e=t,u=t_menusub_highlightNavLinks(r,o,s,u)},100-(t-e))):(e=t,u=t_menusub_highlightNavLinks(r,o,s,u))}))}function t_menusub_getSectionByHref(t){var e=t.getAttribute("href"),n="";e&&(n=e.replace(/\s+/g,"").substring(1));var u,t=document.querySelectorAll('.r[id="'+n+'"]'),e=document.querySelectorAll('.r[data-record-type="215"]');return e.length&&(u=0,Array.prototype.forEach.call(e,function(t){t.querySelector('a[name="'+n+'"]')&&u++})),1===t.length?t:1===e.length&&u?e:void 0}function t_menusub_highlightNavLinks(o,s,r,i){var a=window.pageYOffset,c=i,t=0;return s.length&&(t=s[s.length-1].getAttribute("data-offset-top")),s.length&&null===i&&a+300<+t?(Array.prototype.forEach.call(o,function(t){t.classList.remove("t-active")}),null):(Array.prototype.forEach.call(s,function(t){var e=t.getAttribute("data-offset-top"),n=t.id,u=r[n],t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return(e<=a+300||s[0].id===n&&a>=t-window.innerHeight)&&(null!==i||u.classList.contains("t-active")?null!==i&&n===i&&(c=null):(Array.prototype.forEach.call(o,function(t){t.classList.remove("t-active")}),u.classList.add("t-active"))),!1}),c)}function t_menusub_updateSectionsOffsets(t){Array.prototype.forEach.call(t,function(t){t.setAttribute("data-offset-top",t.offsetTop)})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.oMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e&&1===e.nodeType;){if(Element.prototype.matches.call(e,t))return e;e=e.parentElement||e.parentNode}return null});
